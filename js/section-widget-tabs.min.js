/*! Section Widget 13-08-2013 */
!function(a,b){b.OLTSWTInit=function(a){d.create_tabs(a)};var c={axis:"x",items:"li:not(.olt-swt-designer-tabs-controls)",update:function(){var a=jQuery,b=a(this).parents(".olt-swt-designer-wrapper:first").siblings(".olt-swt-order:first");b.val(a(this).sortable("serialize",{key:"order"}))}},d={tabs:!1,init:function(){a("#widgets-right").delegate(".olt-swt-designer-add-tab a","click","",d.add_tab).delegate(".olt-swt-designer-delete-tab a","click","",d.delete_tab).delegate(".olt-swt-designer-tab-title","focusout","",d.update_tab_title),d.create_tabs()},create_tabs:function(){d.tabs=d.tab?d.tab:a(".olt-swt-designer-wrapper"),d.tabs.tabs().find(".ui-tabs-nav").sortable(c),d.tabs.each(function(b,c){var d=a(c);if("undefined"==typeof d.data("inc")){d.size();var e=d.find(".olt-swt-designer-tab").length;d.data("inc",e)}})},add_tab:function(b){var c=a(this).parents(".olt-swt-designer-wrapper");d.create_tabs(c);var e=c.find("ul"),f=c.data("inc");f++;var g=c.siblings("input[name=idprefix]:first").val(),h=c.siblings("input[name=nameprefix]:first").val(),i=g+"-id-"+f,j="You may use HTML in this widget, and it is probably a good idea to wrap the content in your own <code>&lt;div&gt;</code> to aid styling. Shortcodes are also allowed, but please beware not all of them will function properly on archive pages.";a('<li class="olt-swt-designer-tab" id="'+i+'-list"><a href="#'+i+'" id="'+i+'-title-link">New Tab</a></li>').appendTo(e);var k='<div id="'+i+'" class="olt-swt-designer-panel">';k+='<div class="olt-swt-designer-top">',k+='<label for="">Title:</label> <input id="'+i+'-title" class="olt-swt-designer-tab-title" name="'+h+"["+f+'][title]" type="text" value="New Tab" />',k+='<p class="olt-swt-designer-tabs-controls olt-swt-designer-delete-tab" ><a href="#"  id="'+i+'-delete"><span class="ui-icon ui-icon-trash"  style="float:left;margin-right:.3em;margin-top: -2px;"></span>Delete this tab</a></p>',k+="</div>",k+='<div class="olt-sw-body">',k+='<p class="olt-sw-body-help"><strong>Formatting Help:</strong> '+j+"</p>",k+='<textarea  rows="16" cols="20" name="'+h+"["+f+'][body]"></textarea>',k+="</div>",a(k).appendTo(c),c.tabs("refresh");var l=e.find("li").length;c.tabs("option","active",l-2),c.data("inc",f),b.preventDefault()},delete_tab:function(c){var d=b.confirm("Are you sure you want to delete this tab?");if(d){var e=a(this).attr("id").slice(0,-7),f=a("#"+e),g=a("#"+e+"-list"),h=f.parents(".olt-swt-designer-wrapper");f.remove(),g.remove(),h.tabs("refresh")}c.preventDefault()},update_tab_title:function(b){var c=a(this);a("#"+c.attr("id")+"-link").text(c.val()),b.preventDefault()}};a(function(){d.init()})}(jQuery,window);