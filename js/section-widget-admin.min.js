/*! Section Widget 13-08-2013 */
jQuery(document).ready(function(a){a("head").append('<link id="swt-preview-style" rel="stylesheet" href="" type="text/css" media="all" />');var b=a("#swt-preview-style");a("#swt-theme-preview-wrapper").tabs(),a("#swt-theme").change(function(){"none"==a(this).val()?b.attr("href",""):b.attr("href",stylesheet_url+"?theme="+a(this).val()+"&scope=%23swt-theme-preview")}).change(),a("#swt-theme-preview-link").click(function(){return a("#swt-theme-preview").slideDown(),!1}),a("#swt-theme-preview-hide-link").click(function(){return a("#swt-theme-preview").slideUp(),!1}),a("#swt-scope-help-link").click(function(){return a("#swt-scope-help").slideDown(),!1}),a("#swt-scope-help-hide-link").click(function(){return a("#swt-scope-help").slideUp(),!1}),a("#swt-scope-detect").click(function(){a(this).hide(),a("body").append('<iframe id="swt-scope-detect-iframe" style="display:none" />');var b,c,d=a("#swt-scope-detect-iframe"),e=a(this).siblings("#swt-scope-detect-message").empty().show(),f=function(){return e.append('<div class="message">Initializing scope detect...</div>'),"undefined"==typeof links||links.length<1?(e.append('<div class="error">Cannot find JavaScript variable "links"...</div>'),h(),!1):(b=[],c=links.slice(),d.unbind("load"),g(),void 0)},g=function(f){if("undefined"!=typeof f){var i=a(this).contents().find(".swt-wrapper"),j=!1;i.length<1?e.append('<div class="warning">No widget instances found, skipping...</div>'):(i.length<2&&(e.append('<div class="warning">Only one widget instance found, this might lead to inaccurate result...</div>'),j=!0),i.each(function(){var c=a(this).parents(),d=[];c.each(function(){var b=a(this).attr("id");""!=b&&d.push(b)}),j&&d.shift(),b.push(d)}))}c.length<1?h():(link=c.pop(),e.append('<div class="message">Trying '+link+" ...</div>"),d.attr("src",link).load(g))},h=function(){if(b.length<1)e.append('<div class="error">Scope detection has failed. Your settings are unchanged.</div>');else{for(var c=b.shift(),d=[],f=0;f<c.length;f++){for(var g=!0,h=c[f],i=0;i<b.length;i++)if(-1==a.inArray(h,b[i])){g=!1;break}g&&d.push("#"+h)}d.reverse().push(".swt-outter"),a("#swt-scope").val(d.join(" ")),e.append('<div class="success">Scope detection has completed. Your optimal CSS scope is <strong>&quot;'+d.join(" ")+"&quot;</strong> and it has been filled in for you.<br /><strong>Don't forget to save your changes!</strong></div>")}a("#swt-scope-detect").show()};return f(d,e),!1})});